<!DOCTYPE html>
<html>
<head>
    <title>ğŸŒŸ RONNY'S TOTALLY AWESOME HOMEPAGE ğŸŒŸ</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Comic+Sans+MS|Papyrus|Impact|Crimson+Text:400,400i">
    <link rel="stylesheet" href="style.css">
    <!-- Supabase Client -->
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
</head>
<body>
    <!-- Three-column layout -->
    <div class="page-layout">
        <!-- Left sidebar with skull and guitars -->
        <div class="left-sidebar">
            <img src="gifs/burning-skull.gif" alt="Burning Skull" class="floating-skull">
            <img src="gifs/guitar rotating.webp" alt="Rotating Guitar" class="floating-guitar">
            <img src="gifs/guitar rotating.webp" alt="Rotating Guitar 2" class="floating-guitar2">
        </div>

        <!-- Main content -->
        <div class="container">
        <!-- Welcome banner -->
        <div class="welcome-banner">
            <h1 class="rainbow-text">ğŸ‰ WELCOME TO RONNY'S CYBER SPACE! ğŸ‰</h1>
            <div class="tagline">
                <p class="cyber-tagline">ğŸ’­ "why doesn't anyone say cyber anymore" ğŸ’­</p>
            </div>
            <marquee behavior="scroll" direction="left" class="marquee-text">
                âœ¨ THIS SITE IS TOTALLY RAD! âœ¨ UNDER CONSTRUCTION FOREVER! âœ¨ BEST VIEWED IN NETSCAPE! âœ¨
            </marquee>
        </div>

        <!-- Dark mode toggle -->
        <div class="dark-mode-toggle">
            <button id="darkModeBtn" class="dark-mode-btn">
                <span id="darkModeText">ğŸŒ™ ENABLE DARK MODE ğŸŒ™</span>
                <div class="dark-mode-subtitle" id="darkModeSubtitle"><span class="parentheses">(</span><span id="subtitleText">for delicate dispositions</span><span class="parentheses">)</span></div>
            </button>
        </div>

        <!-- Construction zone -->
        <div class="construction-zone">
            <img src="construction.gif" alt="Under Construction" class="construction-gif">
            <blink>ğŸš§ SITE UNDER CONSTRUCTION ğŸš§</blink>
            <img src="construction.gif" alt="Under Construction" class="construction-gif">
        </div>

        <!-- Cognitohazard warning zone -->
        <div class="performance-shame">
            <div class="shame-border">
                <h2 class="shame-title">âš ï¸ COGNITOHAZARD WARNING âš ï¸</h2>
                <div class="shame-message">
                    <p class="shame-text">
                        <blink>âš ï¸ INTERACT WITH THIS ENTITY AT YOUR OWN RISK âš ï¸</blink><br>
                        <span class="shame-emphasis">MAY INDUCE INVOLUNTARY SELF-REFLECTION, DESTABILIZATION OF COMFORTING DELUSIONS, AND PROLONGED ENCOUNTERS WITH REPRESSED ASPECTS OF THE PSYCHE.</span><br>
                        <span class="shame-final">SUBJECTS OFTEN REPORT EGO DISCOMFORT, MORAL AMBIGUITY, AND ACCELERATED SHADOW INTEGRATION.</span>
                    </p>
                </div>
                <div class="shame-footer">
                    <marquee direction="left" class="shame-marquee">
                        âš ï¸ PROCEED WITH CAUTION âš ï¸ USE AT YOUR OWN RISK âš ï¸ EFFECTS MAY BE PERMANENT âš ï¸
                    </marquee>
                </div>
            </div>
        </div>

        <!-- Divorce counter -->
        <div class="divorce-counter">
            <p class="divorce-title">ğŸ’” LIVE DIVORCE COUNTER ğŸ’”</p>
            <p class="divorce-main">
                <span class="divorce-count" id="divorceCount">000001</span>
            </p>
        </div>

        <!-- Main content area -->
        <div class="main-content">
            <h2 class="neon-text">GREETINGS, CYBER TRAVELER!</h2>
            
            <div class="profile-section">
                <img src="dancing-baby.gif" alt="Dancing Baby" class="dancing-gif">
                <div class="profile-text">
                    <h3>ğŸ“§ ABOUT THE WEBMASTER ğŸ“§</h3>
                    <p>
                        <blink>YO! I'M RONNY!</blink> Welcome to my slice of the information superhighway! 
                        This is where I drop my mad skillz and share my thoughts about life, the universe, 
                        and everything in between! 
                    </p>
                    <p>
                        ğŸµ Current mood: <marquee width="200px">TOTALLY RADICAL</marquee> ğŸµ
                    </p>
                </div>
                <img src="spinning-logo.gif" alt="Spinning Logo" class="spinning-gif">
            </div>

            <!-- Cool sections -->
            <div class="cool-sections">
                <div class="section">
                    <h3 class="section-title">ğŸ® MY INTERESTS ğŸ®</h3>
                    <ul class="cool-list">
                        <li>ğŸ’» Coding like it's 1999</li>
                        <li>ğŸµ Listening to dial-up sounds</li>
                        <li>ğŸŒ Surfing the world wide web</li>
                        <li>ğŸ“§ Checking my email every 5 minutes</li>
                    </ul>
                </div>

                <div class="section">
                    <h3 class="section-title">ğŸ“ GET IN TOUCH ğŸ“</h3>
                    <p>Drop me a line on the electronic mail!</p>
                    <p class="email-address">me@ronnyf.com</p>
                    <img src="email-gif.gif" alt="Email Animation" class="email-gif">
                </div>
            </div>

            <!-- Guestbook -->
            <div class="guestbook">
                <h3 class="guestbook-title">ğŸ“ SIGN MY GUESTBOOK! ğŸ“</h3>
                
                <!-- Guestbook form -->
                <div class="guestbook-form">
                    <form id="guestbookForm">
                        <div class="form-row">
                            <input type="text" id="guestName" placeholder="Your awesome handle" maxlength="20" required>
                            <input type="text" id="guestMessage" placeholder="Drop your message here!" maxlength="50" required>
                        </div>
                        <button type="submit" class="sign-button">ğŸŒŸ SIGN IT! ğŸŒŸ</button>
                    </form>
                </div>

                <!-- Guestbook entries -->
                <marquee direction="up" height="100px" class="guestbook-scroll" id="guestbookEntries">
                    <p>ğŸŒŸ "This site is da bomb!" - CoolDude1998</p>
                    <p>ğŸ’« "AWESOME GRAPHICS!" - WebSurfer2000</p>
                    <p>ğŸ”¥ "Best homepage ever!!!" - HackerKid</p>
                </marquee>
            </div>

            <!-- Footer with animated elements -->
            <div class="footer">
                <img src="flame-left.gif" alt="Flame" class="flame-gif">
                <p class="footer-text">
                    <blink>âš¡ POWERED BY PURE HTML MAGIC âš¡</blink><br>
                    Last updated: Never (always under construction!)<br>
                    Best viewed with: ğŸ–¥ï¸ 800x600 resolution ğŸ–¥ï¸
                </p>
                <img src="flame-right.gif" alt="Flame" class="flame-gif">
            </div>
        </div>
        </div>

        <!-- Right sidebar with dancing rats -->
        <div class="right-sidebar">
            <img src="gifs/rat-dance-2.gif" alt="Dancing Rat" class="floating-rat">
            <img src="gifs/rat-dance-2.gif" alt="Dancing Rat 2" class="floating-rat2">
            <img src="gifs/rat-dance-2.gif" alt="Dancing Rat 3" class="floating-rat3">
        </div>
    </div>

    <!-- Background element -->
    <img src="gifs/okezan.gif" alt="Okezan" class="floating-okezan">

    <!-- JavaScript for extra 90s effects -->
    <script>
        // Make the title blink
        setInterval(function() {
            document.title = document.title.includes('ğŸŒŸ') ? 'RONNY\'S TOTALLY AWESOME HOMEPAGE' : 'ğŸŒŸ RONNY\'S TOTALLY AWESOME HOMEPAGE ğŸŒŸ';
        }, 1000);

        // Random background color changes
        setInterval(function() {
            const colors = ['#FF00FF', '#00FFFF', '#FFFF00', '#FF0000', '#00FF00', '#0000FF'];
            const randomColor = colors[Math.floor(Math.random() * colors.length)];
            document.body.style.borderColor = randomColor;
        }, 2000);

        // Dark mode functionality
        const darkModeBtn = document.getElementById('darkModeBtn');
        const darkModeText = document.getElementById('darkModeText');
        const subtitleText = document.getElementById('subtitleText');
        const body = document.body;

        // Check for saved dark mode preference
        if (localStorage.getItem('darkMode') === 'enabled') {
            body.classList.add('dark-mode');
            darkModeText.textContent = 'â˜€ï¸ DISABLE DARK MODE â˜€ï¸';
            subtitleText.textContent = 'for virtuous eyes only';
        }

        // Dark mode toggle function
        darkModeBtn.addEventListener('click', function() {
            body.classList.toggle('dark-mode');
            
            if (body.classList.contains('dark-mode')) {
                darkModeText.textContent = 'â˜€ï¸ DISABLE DARK MODE â˜€ï¸';
                subtitleText.textContent = 'for virtuous eyes only';
                localStorage.setItem('darkMode', 'enabled');
            } else {
                darkModeText.textContent = 'ğŸŒ™ ENABLE DARK MODE ğŸŒ™';
                subtitleText.textContent = 'for delicate dispositions';
                localStorage.setItem('darkMode', 'disabled');
            }
        });

        // Initialize Supabase
        const supabaseUrl = 'https://yuwjdfviiustolilhmzp.supabase.co';
        const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inl1d2pkZnZpaXVzdG9saWxobXpwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTIyMTcwMDYsImV4cCI6MjA2Nzc5MzAwNn0.o53QsE5gfW-c_HPE_27mLtyOGN2X0NGLlu-sACThxC4';
        const supabase = window.supabase.createClient(supabaseUrl, supabaseKey);

        // Guestbook functionality
        const guestbookForm = document.getElementById('guestbookForm');
        const guestbookEntries = document.getElementById('guestbookEntries');

        // Load and display guestbook entries from Supabase
        async function loadGuestbookEntries() {
            try {
                const { data: entries, error } = await supabase
                    .from('guestbook_entries')
                    .select('*')
                    .order('created_at', { ascending: false })
                    .limit(20);

                if (error) {
                    console.error('Error loading entries:', error);
                    return;
                }

                let entriesHTML = '';
                entries.reverse().forEach(entry => {
                    entriesHTML += `<p>${entry.emoji} "${entry.message}" - ${entry.name}</p>`;
                });
                
                guestbookEntries.innerHTML = entriesHTML;
            } catch (error) {
                console.error('Error loading guestbook:', error);
                // Fallback to show default message
                guestbookEntries.innerHTML = '<p>ğŸŒŸ "This site is da bomb!" - CoolDude1998</p><p>ğŸ’« "AWESOME GRAPHICS!" - WebSurfer2000</p><p>ğŸ”¥ "Best homepage ever!!!" - HackerKid</p>';
            }
        }

        // Add new guestbook entry to Supabase
        async function addGuestbookEntry(name, message) {
            try {
                // Random emoji selection for new entries
                const emojis = ['ğŸŒŸ', 'ğŸ’«', 'ğŸ”¥', 'âœ¨', 'ğŸ‰', 'ğŸ’', 'ğŸŒˆ', 'âš¡', 'ğŸš€', 'ğŸŠ'];
                const randomEmoji = emojis[Math.floor(Math.random() * emojis.length)];

                const { data, error } = await supabase
                    .from('guestbook_entries')
                    .insert([
                        { 
                            name: name, 
                            message: message, 
                            emoji: randomEmoji 
                        }
                    ]);

                if (error) {
                    console.error('Error adding entry:', error);
                    alert('Oops! Failed to sign the guestbook. Try again!');
                    return;
                }

                // Reload entries to show the new one
                await loadGuestbookEntries();
            } catch (error) {
                console.error('Error adding guestbook entry:', error);
                alert('Oops! Failed to sign the guestbook. Try again!');
            }
        }

        // Handle form submission
        guestbookForm.addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const nameInput = document.getElementById('guestName');
            const messageInput = document.getElementById('guestMessage');
            
            const name = nameInput.value.trim();
            const message = messageInput.value.trim();
            
            if (name && message) {
                // Show loading state
                const button = document.querySelector('.sign-button');
                const originalText = button.textContent;
                button.textContent = 'ğŸ“¡ SIGNING... ğŸ“¡';
                button.disabled = true;
                
                await addGuestbookEntry(name, message);
                
                // Clear form
                nameInput.value = '';
                messageInput.value = '';
                
                // Show success feedback
                button.textContent = 'ğŸ‰ SIGNED! ğŸ‰';
                button.style.background = 'linear-gradient(45deg, #00ff00, #00ffff, #0080ff)';
                
                setTimeout(() => {
                    button.textContent = originalText;
                    button.style.background = '';
                    button.disabled = false;
                }, 2000);
            }
        });

        // Test Supabase connection
        async function testSupabase() {
            try {
                console.log('Testing Supabase connection...');
                const { data, error } = await supabase.from('guestbook_entries').select('count');
                console.log('Supabase test result:', { data, error });
                if (error) {
                    alert('Supabase Error: ' + error.message);
                } else {
                    alert('Supabase connected successfully!');
                }
            } catch (err) {
                console.error('Supabase test failed:', err);
                alert('Supabase test failed: ' + err.message);
            }
        }
        
        // Add test button temporarily
        document.addEventListener('DOMContentLoaded', function() {
            const testBtn = document.createElement('button');
            testBtn.textContent = 'TEST SUPABASE';
            testBtn.style.position = 'fixed';
            testBtn.style.top = '10px';
            testBtn.style.right = '10px';
            testBtn.style.zIndex = '9999';
            testBtn.onclick = testSupabase;
            document.body.appendChild(testBtn);
        });

        // Load entries on page load
        loadGuestbookEntries();

    </script>
</body>
</html>